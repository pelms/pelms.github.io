<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Generate a Link with Analytics</title>
<meta name="author" content="Phil Elms" />
<meta name="description" content="Generate a Link with Analytics" />
<style type="text/css">
p.highlight { color: #D90000; font-family: Consolas, "Courier New", monospace; font-size: larger; }
</style>
<link rel="stylesheet" href="css/style.css">
</head>

<body>
<script type="text/javascript">
function showResult() {
	var url = $('#url').val().trim();
	
	if (/^https?:\/\//.test(url)) {
		url = 'http://www.uwe.ac.uk/library/includes/analytics/g_event.htm?url=' + encodeURIComponent(url);
		// Redirect URL
		document.getElementById('redirect_url').value = url;
		document.getElementById('redirect_link').href = url + '?no_analytics';
	}	else {
		alert('Not a valid URL');
	}
}
</script>

<main id="contentwrapper" class="l-page__inner clearfix" tabindex="-1">
<div id="allowNav">

<div id="content"> 

<h1>Generate a Link with Analytics</h1>

<div id="leftcol">

<p>These links will go to a UWE page which will triger an 'event' in Google Analytics before redirecting.</p>

<form method="get" action="encode-url.htm" id="del_form">
 <textarea name="url" id="url" cols="100" rows="3" onfocus="if (this.value=='&nbsp;Enter URL...') this.value=''">&nbsp;Enter URL...</textarea>
 <br />
 <input type="button" value="Generate" onclick="showResult();" />
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 <input name="Reset" type="reset" id="Reset" value="Clear" />
 <br />
 <br />
 <h2>URL with analytics</h2>
 <p><a id="redirect_link" href="#" target="_blank">Test the link</a> (not included in analytics)</p>
 <textarea name="redirect_url" cols="100" rows="4" id="redirect_url" onclick="this.focus(); this.select();"></textarea>
</form>

</div>
<div class="clearfix"></div>
</div><!-- /#content -->
<aside class="m-block no-print"></aside>
</div><!-- /#allowNav -->
</body>

</body>
</html>

